<UserControl x:Class="BudgetPlanner.Views.EntryView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="clr-namespace:BudgetPlanner.Views"
             xmlns:models="clr-namespace:BudgetPlanner.Models"
             xmlns:converters="clr-namespace:BudgetPlanner.Converters">

	<UserControl.Resources>
		<converters:EnumToBooleanConverter x:Key="EnumToBooleanConverter"/>
	</UserControl.Resources>

	<Grid Margin="10">
		<Grid.ColumnDefinitions>
			<ColumnDefinition Width="*"/>
			<ColumnDefinition Width="*"/>
		</Grid.ColumnDefinitions>

		<!-- Income Section -->
		<GroupBox Header="Income Management" Grid.Column="0" Margin="0,0,5,0">
			<Grid>
				<Grid.RowDefinitions>
					<RowDefinition Height="Auto"/>
					<RowDefinition Height="*"/>
				</Grid.RowDefinitions>

				<!-- Income Form -->
				<StackPanel Grid.Row="0" Margin="5">
					<TextBlock Text="Description:" FontWeight="Bold" Margin="0,5,0,2"/>
					<TextBox Text="{Binding IncomeDescription, UpdateSourceTrigger=PropertyChanged}" Padding="3"/>

					<TextBlock Text="Amount:" FontWeight="Bold" Margin="0,10,0,2"/>
					<TextBox Text="{Binding IncomeAmount, UpdateSourceTrigger=PropertyChanged}" Padding="3"/>

					<TextBlock Text="Category:" FontWeight="Bold" Margin="0,10,0,2"/>
					<ComboBox SelectedItem="{Binding SelectedIncomeCategory}" Padding="3">
						<ComboBox.ItemsSource>
							<x:Array Type="{x:Type models:IncomeCategory}">
								<models:IncomeCategory>Salary</models:IncomeCategory>
								<models:IncomeCategory>Dividend</models:IncomeCategory>
								<models:IncomeCategory>Grant</models:IncomeCategory>
							</x:Array>
						</ComboBox.ItemsSource>
					</ComboBox>

					<TextBlock Text="Recurrence:" FontWeight="Bold" Margin="0,10,0,2"/>
					<StackPanel>
						<RadioButton Content="One Time"
                                   IsChecked="{Binding SelectedIncomeRecurrence, Converter={StaticResource EnumToBooleanConverter}, ConverterParameter={x:Static models:RecurrenceType.OneTime}}"
                                   Margin="0,2"/>
						<RadioButton Content="Monthly"
                                   IsChecked="{Binding SelectedIncomeRecurrence, Converter={StaticResource EnumToBooleanConverter}, ConverterParameter={x:Static models:RecurrenceType.Monthly}}"
                                   Margin="0,2"/>
						<RadioButton Content="Yearly"
                                   IsChecked="{Binding SelectedIncomeRecurrence, Converter={StaticResource EnumToBooleanConverter}, ConverterParameter={x:Static models:RecurrenceType.Yearly}}"
                                   Margin="0,2"/>
					</StackPanel>

					<StackPanel>
						<StackPanel.Style>
							<Style TargetType="StackPanel">
								<Setter Property="Visibility" Value="Collapsed"/>
								<Style.Triggers>
									<DataTrigger Binding="{Binding SelectedIncomeRecurrence}" Value="{x:Static models:RecurrenceType.Yearly}">
										<Setter Property="Visibility" Value="Visible"/>
									</DataTrigger>
								</Style.Triggers>
							</Style>
						</StackPanel.Style>
						<TextBlock Text="Month (1-12):" FontWeight="Bold" Margin="0,10,0,2"/>
						<TextBox Text="{Binding IncomeRecurrenceMonth, UpdateSourceTrigger=PropertyChanged}" Padding="3"/>
					</StackPanel>

					<StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,15,0,0">
						<Button Content="Add" Command="{Binding AddIncomeCommand}" Width="80" Margin="5,0" Padding="5"/>
						<Button Content="Update" Command="{Binding UpdateIncomeCommand}" Width="80" Margin="5,0" Padding="5"/>
						<Button Content="Clear" Command="{Binding ClearIncomeFormCommand}" Width="80" Margin="5,0" Padding="5"/>
					</StackPanel>
				</StackPanel>

				<!-- Income List -->
				<GroupBox Header="Income List" Grid.Row="1" Margin="5">
					<DataGrid ItemsSource="{Binding Incomes}"
                            SelectedItem="{Binding SelectedIncome}"
                            AutoGenerateColumns="False"
                            IsReadOnly="True"
                            CanUserAddRows="False">
						<DataGrid.Columns>
							<DataGridTextColumn Header="Description" Binding="{Binding Description}" Width="*"/>
							<DataGridTextColumn Header="Amount" Binding="{Binding Amount, StringFormat=C}" Width="100"/>
							<DataGridTextColumn Header="Category" Binding="{Binding Category}" Width="100"/>
							<DataGridTextColumn Header="Recurrence" Binding="{Binding Recurrence}" Width="100"/>
						</DataGrid.Columns>
						<DataGrid.ContextMenu>
							<ContextMenu>
								<MenuItem Header="Delete" Command="{Binding DeleteIncomeCommand}"/>
							</ContextMenu>
						</DataGrid.ContextMenu>
					</DataGrid>
				</GroupBox>
			</Grid>
		</GroupBox>

		<!-- Expense Section -->
		<GroupBox Header="Expense Management" Grid.Column="1" Margin="5,0,0,0">
			<Grid>
				<Grid.RowDefinitions>
					<RowDefinition Height="Auto"/>
					<RowDefinition Height="*"/>
				</Grid.RowDefinitions>

				<!-- Expense Form -->
				<StackPanel Grid.Row="0" Margin="5">
					<TextBlock Text="Description:" FontWeight="Bold" Margin="0,5,0,2"/>
					<TextBox Text="{Binding ExpenseDescription, UpdateSourceTrigger=PropertyChanged}" Padding="3"/>

					<TextBlock Text="Amount:" FontWeight="Bold" Margin="0,10,0,2"/>
					<TextBox Text="{Binding ExpenseAmount, UpdateSourceTrigger=PropertyChanged}" Padding="3"/>

					<TextBlock Text="Category:" FontWeight="Bold" Margin="0,10,0,2"/>
					<ComboBox SelectedItem="{Binding SelectedExpenseCategory}" Padding="3">
						<ComboBox.ItemsSource>
							<x:Array Type="{x:Type models:ExpenseCategory}">
								<models:ExpenseCategory>Food</models:ExpenseCategory>
								<models:ExpenseCategory>Housing</models:ExpenseCategory>
								<models:ExpenseCategory>Transport</models:ExpenseCategory>
								<models:ExpenseCategory>Leisure</models:ExpenseCategory>
								<models:ExpenseCategory>Subscriptions</models:ExpenseCategory>
                                <models:ExpenseCategory>Savings</models:ExpenseCategory>
                            </x:Array>
						</ComboBox.ItemsSource>
					</ComboBox>

					<TextBlock Text="Recurrence:" FontWeight="Bold" Margin="0,10,0,2"/>
					<StackPanel>
						<RadioButton Content="One Time"
                                   IsChecked="{Binding SelectedExpenseRecurrence, Converter={StaticResource EnumToBooleanConverter}, ConverterParameter={x:Static models:RecurrenceType.OneTime}}"
                                   Margin="0,2"/>
						<RadioButton Content="Monthly"
                                   IsChecked="{Binding SelectedExpenseRecurrence, Converter={StaticResource EnumToBooleanConverter}, ConverterParameter={x:Static models:RecurrenceType.Monthly}}"
                                   Margin="0,2"/>
						<RadioButton Content="Yearly"
                                   IsChecked="{Binding SelectedExpenseRecurrence, Converter={StaticResource EnumToBooleanConverter}, ConverterParameter={x:Static models:RecurrenceType.Yearly}}"
                                   Margin="0,2"/>
					</StackPanel>

					<StackPanel>
						<StackPanel.Style>
							<Style TargetType="StackPanel">
								<Setter Property="Visibility" Value="Collapsed"/>
								<Style.Triggers>
									<DataTrigger Binding="{Binding SelectedExpenseRecurrence}" Value="{x:Static models:RecurrenceType.Yearly}">
										<Setter Property="Visibility" Value="Visible"/>
									</DataTrigger>
								</Style.Triggers>
							</Style>
						</StackPanel.Style>
						<TextBlock Text="Month (1-12):" FontWeight="Bold" Margin="0,10,0,2"/>
						<TextBox Text="{Binding ExpenseRecurrenceMonth, UpdateSourceTrigger=PropertyChanged}" Padding="3"/>
					</StackPanel>

					<StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,15,0,0">
						<Button Content="Add" Command="{Binding AddExpenseCommand}" Width="80" Margin="5,0" Padding="5"/>
						<Button Content="Update" Command="{Binding UpdateExpenseCommand}" Width="80" Margin="5,0" Padding="5"/>
						<Button Content="Clear" Command="{Binding ClearExpenseFormCommand}" Width="80" Margin="5,0" Padding="5"/>
					</StackPanel>
				</StackPanel>

				<!-- Expense List -->
				<GroupBox Header="Expense List" Grid.Row="1" Margin="5">
					<DataGrid ItemsSource="{Binding Expenses}"
                            SelectedItem="{Binding SelectedExpense}"
                            AutoGenerateColumns="False"
                            IsReadOnly="True"
                            CanUserAddRows="False">
						<DataGrid.Columns>
							<DataGridTextColumn Header="Description" Binding="{Binding Description}" Width="*"/>
							<DataGridTextColumn Header="Amount" Binding="{Binding Amount, StringFormat=C}" Width="100"/>
							<DataGridTextColumn Header="Category" Binding="{Binding Category}" Width="100"/>
							<DataGridTextColumn Header="Recurrence" Binding="{Binding Recurrence}" Width="100"/>
						</DataGrid.Columns>
						<DataGrid.ContextMenu>
							<ContextMenu>
								<MenuItem Header="Delete" Command="{Binding DeleteExpenseCommand}"/>
							</ContextMenu>
						</DataGrid.ContextMenu>
					</DataGrid>
				</GroupBox>
			</Grid>
		</GroupBox>
	</Grid>
</UserControl>